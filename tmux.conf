# prefix-keyの指定
set -g prefix C-a

# prefix-keyの解除
unbind-key C-b

# C-a*2でtmux内のプログラムにC-aを送る
bind C-a send-prefix

# コピーモードでのキーバインドを Vim に近付ける。
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi V send-keys -X select-line
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "xsel -ip && xsel -op | xsel -bi"
bind-key -T copy-mode-vi Y send-keys -X copy-line
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "xsel -ip && xsel -op | xsel -bi"
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe "xsel -ip && xsel -op | xsel -bi"

bind-key -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'select-pane -t=; copy-mode -e; send-keys -M'"
bind-key -n WheelDownPane select-pane -t= \; send-keys -M

# Double LMB Select & Copy (Word)
bind-key -T copy-mode-vi DoubleClick1Pane \
    select-pane \; \
    send-keys -X select-word \; \
    send-keys -X copy-pipe "xsel -ip && xsel -op | xsel -bi"
bind-key -n DoubleClick1Pane \
    select-pane \; \
    copy-mode -M \; \
    send-keys -X select-word \; \
    send-keys -X copy-pipe "xsel -ip && xsel -op | xsel -bi"

# Triple LMB Select & Copy (Line)
bind-key -T copy-mode-vi TripleClick1Pane \
    select-pane \; \
    send-keys -X select-line \; \
    send-keys -X copy-pipe "xsel -ip && xsel -op | xsel -bi"
bind-key -n TripleClick1Pane \
    select-pane \; \
    copy-mode -M \; \
    send-keys -X select-line \; \
    send-keys -X copy-pipe "xsel -ip && xsel -op | xsel -bi"

# 新しいウィンドウ(current-directoryを引き継ぐ)
bind C-c new-window -c '#{pane_current_path}'

# 設定ファイルをリロード
bind-key -T prefix r source-file ~/.tmux.conf \; display-message 'Reload'

# ペインの大きさを調整
bind -r < resize-pane -L 5
bind -r > resize-pane -R 5
bind -r - resize-pane -D 5
bind -r + resize-pane -U 5

# ペインを区切る(current-directoryを引き継ぐ)
bind v split-window -h -c "#{pane_current_path}"
bind s split-window -v -c "#{pane_current_path}"

setw -g mouse on
set  -g status on
set  -g status-keys vi
setw -g mode-keys vi

# True Colorを使用する
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

# ESCの反応を早くする
set -g escape-time 1

# 添字を1から始める
set -g base-index 1
setw -g pane-base-index 1

# ウィンドウを閉じた際に番号を詰める
set -g renumber-windows on

# prefix-keyの有効時間をミリ秒で指定
# bind-key -rで指定しているkeyはprefix-keyを再度押さなくとも連続で効く
set -g repeat-time 400

# display-message
set -g display-time 1500

# tmux のペインのフォーカスが移った場合に子プロセスに入力を送る。
set -g focus-events on


# ----------------------------------------
# Status
# ----------------------------------------
setw -g window-status-format ' #I.#W:#{b:pane_current_path} '

# ----------------------------------------
# Color
# ----------------------------------------
# statusの色
set -g status-style fg=default,bg=default

# message表示時のstatus lineの色。dispaly,confirm-before -p などのコマンド出力の色
set -g message-style fg=blue,bg=black

# ステータスバーの色を設定する
set-option -g status-bg "colour238"

# status line の文字色を指定する。
set-option -g status-fg "colour255"

# setw -g window-status-current-format で指定した文字列の色
setw -g window-status-current-style fg='#8fa1b3',bold,bg=default

# setw -g window-status-format で指定した文字列の色
setw -g window-status-style fg='#535b66',bold,bg=default
